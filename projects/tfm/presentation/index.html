<!doctype html>
<html lang="es">
<head>
	<title>Análisis y explotación de datos abiertos municipales</title>

	<meta charset="UTF-8" />
	<meta http-equiv="content-type" content="text/html" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta name="author" content="Carlos J. Peláez Rivas" />

	<link rel="stylesheet" href="css/font-awesome.min.css">
	<link rel="stylesheet" href="css/impressjs.css"/>
	<link rel="stylesheet" href="css/main.css"/>

	<link rel="shortcut icon" href="images/favicon.ico" />
</head>


<body class="impress-not-supported">
	<nav>
		<a href="#/title" class="home">
			<span class="fa fa-home"></span>
		</a>
		<a href="#/overview" class="overview">
			<span class="fa fa-th"></span>
		</a>
	</nav>

	<div class="fallback-message">
		<p>Tu navegador <b>no soporta las características necesarias</b> por impress.js, de modo que verás una versión simplificada de esta presentación.</p>
		<p>Para la mejor experiencia, por favor, usa la última versión de <b>Chrome</b>, <b>Safari</b> o <b>Firefox</b>.</p>
	</div>

	<div id="impress" data-transition-duration="1500">

		<div id="title" class="step slide" data-x="0" data-y="-500" data-z="0" style="font-size:20px;">
			<center>
				<div style="padding-top:20px;">
					Escuela Técnica Superior de Ingeniería Informática <br/>
					Máster en Ingeniería Informática
				</div>
				<h1 style="padding:50px 0 50px 0;">
					<b>Análisis y explotación de datos abiertos municipales de transporte con tecnologías Big Data</b>
				</h1>
				<h2 style="padding:10px 0 10px 0;">
					<b>Carlos Jesús Peláez Rivas</b> <br/>
				</h2>

				<table width="100%" style="padding-top:150px;">
					<tr>
						<td>
							Tutorizado por: <br/>
							<b>Antonio Jesús Nebro Urbaneja</b> <br>
							<b>José Manuel García Nieto</b> <br>
							<br>
							Departamento: <br/>
							<b>Lenguajes y Ciencias de la Computación</b>
						</td>
						<td style="text-align:right;">
							<br/>
							<br/>
							<br/>
							<br/>
							Universidad de Málaga<br/>
							Octubre de 2018
						</td>
					</tr>
				</table>
			</center>
		</div>

		<div id="d1a" class="step slide" data-x="1024" data-y="0" data-z="0">
			<h2 class="centred">¿Qué son los datos abiertos?</h2>
		</div>

		<div id="d1b" class="step slide" data-x="1024" data-y="350" data-z="300" style="padding-top:150px">
			<b>Datos cuyas principales características son:</b>
			<ul>
				<li>Libre disposición</li>
				<li>Libre uso</li>
				<li>Gratuitos</li>
				<li>Sin derechos de autor</li>
			</ul>
			<br>
			<b>Incluyen información de tipo muy variado, como:</b>
			<ul>
				<li>Salud</li>
				<li>Deporte</li>
				<li>Turismo</li>
				<li>Transporte</li>
			</ul>
		</div>

		<div class="step slide" data-x="1024" data-y="1000" data-z="300">
			<center><h2>Ámbito municipal</h2></center>
			Se trata de datos ofrecidos principalmente por organizaciones gubernamentales o por los ayuntamientos. <br>
			<br>
			Entre los que se incluyen: <br>
			<ul>
				<li>
					<b>Datos estáticos</b> <br>
					<ul>
						<li class="sub">Ubicaciones de aparcamientos, semáforos, paradas</li>
						<li class="sub">Horarios</li>
					</ul>
				</li>
				<li>
					<b>Datos en tiempo real</b> <i>(pseudo-real)</i> <br>
					<ul>
						<li class="sub">Niveles de ocupación</li>
						<li class="sub" >Localización de vehículos</li>
						<li class="sub">Cantidad de tráfico en tramos o calles</li>
					</ul>
				</li>
			</ul>
		</div>

		<div class="step slide" data-x="2048" data-y="0" data-z="0">
			<h2 class="centred">Generación de los datos abiertos</h2>
		</div>

		<div class="step slide" data-x="2048" data-y="250" data-z="0">
			<h2 class="centred">Ingente cantidad de datos almacenados</h2>
			<div style="padding-top:500px;">
				<i>Diversos tipos de formatos y estructuras.</i>
			</div>
		</div>

		<div class="step slide" data-x="2048" data-y="500" data-z="0">
			<h2 class="centred">Big Data</h2>
			<div style="padding-top:500px;">
				<i>Permite la creación de aplicaciones para facilitar e intentar mejorar la vida en las ciudades.</i>
			</div>
		</div>

		<div class="step slide" data-x="2048" data-y="750" data-z="0">
			<h2 class="centred">Smart mobility</h2>
			<div style="padding-top:500px;">
				<i>Es mucho más que transporte. Afecta al comportamiento de los ciudadanos.</i>
			</div>
		</div>

		<div id="d2a" class="step slide" data-x="2048" data-y="1000" data-z="0">
			<h2 class="centred">Smart city</h2>
		</div>

		<div id="d2b" class="step slide" data-x="1920" data-y="1000" data-z="0" style="padding-top:190px">
			<img src="images/aux_llave1.png" style="position:fixed; top:184px; left:370px; width:80px; height:300px;">

			<ul>
				<li>Smart economy</li>
				<li>Smart enviroment</li>
				<li>Smart governance</li>
				<li>Smart living</li>
				<li><b>Smart mobility</b></li>
				<li>Smart people</li>
			</ul>
			<br> <br>
			<i>Estos términos son los que forman la definición actual de ciudad inteligente ofrecida por la Unión Europea.</i>
		</div>

		<div class="step slide" data-x="0" data-y="-1024" data-z="0">
			<center><h2>Contenido de esta presentación</h2></center>
			<ul>
				<li style="color:#999999">Introducción</li>
				<li>Tecnologías empleadas</li>
				<li>Objetivos</li>
				<li>Fases del trabajo realizado</li>
				<ul>
					<li class="sub">Instalación y configuración</li>
					<li class="sub">Búsqueda, descarga y tratamiento</li>
					<li class="sub">Análisis y visualización</li>
				</ul>
				<li>Conclusiones generales</li>
			</ul>
		</div>

		<div id="d3a" class="step slide" data-x="0" data-y="-2048" data-z="0">
			<h2 class="centred">Tecnologías empleadas</h2>
		</div>

		<div id="d3b" class="step slide" data-x="0" data-y="-1700" data-z="300" style="padding-top:150px">
			<img src="images/logo_java.png" width="130px" style="position:fixed; top:150px; left:400px; ">
			<img src="images/logo_scala.png" width="250px" style="position:fixed; top:185px; left:580px; ">
			<img src="images/logo_python.png" width="300px" style="position:fixed; top:400px; left:400px; ">
			<img src="images/logo_spark.png" width="200px" style="position:fixed; top:275px; left:570px; ">
			<img src="images/logo_mongo.png" width="350px" style="position:fixed; top:490px; left:370px; ">
			<img src="images/logo_jupyter.png" width="200px" style="position:fixed; top:385px; left:770px; ">
			<img src="images/logo_folium.png" width="200px" style="position:fixed; top:180px; left:810px; ">
			<img src="images/logo_git.png" width="200px" style="position:fixed; top:625px; left:350px; ">
			<img src="images/logo_raspberry.png" width="130px" style="position:fixed; top:585px; left:695px; ">

			<ul>
				<li>Java</li>
				<li>Scala</li>
				<li>Python</li>
				<li>Apache Spark</li>
				<li>MongoDB</li>
				<li>Jupyter</li>
				<li>Folium</li>
				<li>Git</li>
				<li>Raspberry PI</li>
			</ul>
		</div>

		<div id="d4a" class="step slide" data-x="1024" data-y="-2048" data-z="0">
			<h2 class="centred">Objetivos</h2>
		</div>

		<div id="d4b" class="step slide" data-x="1024" data-y="-1700" data-z="300" style="padding-top:150px">
			<ul>
				<li>Búsqueda de los conjuntos de datos</li>
				<li>Aplicaciones para la descarga desde las fuentes de datos usando <b>Python</b></li>
				<li>Tratamiento de datos en streaming usando <b>Apache Spark</b></li>
				<li>Comparación de la misma aplicación en <b>Java</b> y <b>Scala</b></li>
				<li>Procesamiento de histórico de datos usando <b>Python</b></li>
				<li>Almacenamiento de datos usando <b>MongoDB</b></li>
				<li>Notebook en <b>Jupyter</b> para realizar estimaciones en los retrasos de la EMT</li>
				<li>Notebook en <b>Jupyter</b> para visualizar y analizar históricos de datos de Málaga y Madrid</li>
				<li>Realizar correcciones sobre los datos</li>
				<li>Realizar estimaciones y regresiones sobre los datos</li>
			</ul>
		</div>

		<div class="step slide" data-x="1024" data-y="-1024" data-z="0">
			<h2 class="centred">Fases del trabajo realizado</h2>
		</div>

		<div class="step slide" data-x="1024" data-y="-500" data-z="0">
			<center><h2>Instalación y configuración</h2></center>
			<br><br>
			<b>Máquinas utilizadas</b> <br>
			<ul>
				<li>Ordenador portátil con 4 hilos de ejecución</li>
				<li>Raspberry Pi 3 modelo B</li>
			</ul>
			<br><br>
			<b>Descarga, instalación y configuración de todas las herramientas a utilizar</b>
		</div>

		<div class="step slide" data-x="2048" data-y="-500" data-z="0">
			<center><h2>Estructura de relación de las aplicaciones</h2></center>
			<br><br>
			<img src="images/esquema1.png" width="100%">
		</div>

		<div class="step slide" data-x="2048" data-y="-1700" data-z="0">
			<center><h2>Búsqueda de datos abiertos</h2></center>
			<br><br>
			<b>Málaga</b>
			<ul>
				<li>Ubicaciones de autobuses de la EMT en tiempo real</li>
				<li>Líneas y paradas de autobuses de la EMT</li>
				<li>Horarios de autobuses de la EMT</li>
				<li>Localización de los semáforos en Málaga</li>
				<li>Localización de los cortes de tráfico en Málaga</li>
				<li>Ocupación de aparcamientos públicos municipales en tiempo real</li>
			</ul>
			<br><br>
			<b>Madrid</b>
			<ul>
				<li>Histórico de tráfico desde 2013 hasta agosto de 2018</li>
			</ul>
		</div>

		<div class="step slide" data-x="2048" data-y="-2400" data-z="0">
			<center><h2>Descarga de datos</h2></center>
			<br><br>
			<b>Málaga</b> <br>
			Uso de una <b>Raspberry Pi</b> para descargar durante 10 días los datos ofrecidos por las diversas fuentes encontradas.
			<br><br><br>
			<b>Madrid</b> <br>
			Descarga manual de los datos.
		</div>

		<div class="step slide" data-x="1024" data-y="-2400" data-z="0">
			<center><h2>Tratamiento y limpieza de datos</h2></center>
			<br><br>
			<img src="images/esquema2.png" width="105%" style="margin-left:-25px;">
		</div>

		<div id="d5a" class="step slide" data-x="0" data-y="-2650" data-z="0">
			<h2 class="centred">Análisis y visualización</h2>
		</div>

		<div id="d5b" class="step slide" data-x="0" data-y="-2300" data-z="300" style="padding-top:150px">
			Desarrollo de 6 notebooks en <b>Jupyter</b> usando los datos obtenidos en los pasos anteriores.
			<br><br>
			<ul>
				<li>Notebook 1. Visualización usando Folium</li>
				<li>Notebook 2. Segmentación de datos</li>
				<li>Notebook 3. Estimación de retrasos</li>
				<li>Notebook 4. Visualización y predicción – EMT Málaga</li>
				<li>Notebook 5. Visualización y predicción – M30 Madrid</li>
				<li>Notebook 6. Visualización y corrección – Parkings Málaga</li>
			</ul>
		</div>

		<div class="step slide" data-x="-1024" data-y="-2400" data-z="0">
			<center><h2>Notebook 1. Visualización usando Folium</h2></center>
			<br><br>
			Primeras pruebas para ver el funcionamiento y la potencia de <b>Jupyter</b> y <b>Folium</b>. <br>
			<br>
			Este notebook incluye una serie de mapas para visualizar los datos descargados de Málaga, entre los que se incluye: <br>
			<br>
			<ul>
				<li>Paradas de autobús</li>
				<li>Posición de los autobuses en tiempo real</li>
				<li>Cortes de tráfico</li>
				<li>Semáforos</li>
			</ul>
		</div>

		<div class="step slide" data-x="-1024" data-y="-2400" data-z="-200">
			<img src="images/captura1.png" width="100%" style="padding:70px 0;">
			<i style="font-size:22px;">Visualización de todas las paradas de autobús en Málaga</i>
		</div>

		<div class="step slide" data-x="-1024" data-y="-2400" data-z="-400">
			<img src="images/captura2.png" width="100%" style="padding:70px 0;">
			<i style="font-size:22px;">Visualización de las paradas de autobús en el centro de Málaga</i>
		</div>

		<div class="step slide" data-x="-1024" data-y="-1700" data-z="0">
			<center><h2>Notebook 2. Segmentación de datos</h2></center>
			<br><br>
			Realización de un proceso no supervisado de segmentación usando el algoritmo <b>k-medias</b> el el conjunto de datos que almacena los retrasos de los autobuses. <br>
			<br>
			Se busca detectar en qué momento se considera que un autobús está en estado: <br>
			<br>
			<ul>
				<li>Adelantado</li>
				<li>En hora</li>
				<li>Retrasado</li>
			</ul>
		</div>

		<div class="step slide" data-x="-1024" data-y="-1700" data-z="-200">
			<img src="images/captura3.png" width="100%" style="padding:70px 0;">
			<i style="font-size:22px;">Segmentación de datos para detectar cuándo los autobuses llevan o no retraso</i>
		</div>

		<div class="step slide" data-x="-1024" data-y="-1024" data-z="0">
			<center><h2>Notebook 3. Estimación de retrasos</h2></center>
			<br><br>
			En este notebook se utilizan los datos almacenados para mostrar todos los autobuses de una línea, estimar su estado y mostrar la información referente a dicha estimación. <br>
			<br>
			Se debe configurar con parámetros como la velocidad media, o el umbral de retraso. <br>
			<br>
			<i>Este cuaderno puede ser ejecutado junto a los procesos <b>Python</b> de descarga y <b>Spark</b> de tratamiento de datos para procesar la información en tiempo real</i>
		</div>

		<div class="step slide" data-x="-1024" data-y="-500" data-z="0">
			<center><h2>Función de estimación de retrasos</h2></center>
			<br>
			Dado un registro de autobús ofrecido por la EMT:<br>
			<br>
			<table width="100%" style="font-size:25px;">
				<tr>
					<td width="50px">1.</td>
					<td>Se usa la última parada visitada por el autobús para calcular a cuál se está dirigiendo</td>
				</tr>
				<tr>
					<td>2.</td>
					<td>Se comprueba el horario de la línea para obtener a qué hora debería llegar a dicha parada</td>
				</tr>
				<tr>
					<td>3.</td>
					<td>se calcula la distancia en línea recta entre la posición del autobús y la parada destino</td>
				</tr>
				<tr>
					<td>4.</td>
					<td>Se calcula el tiempo necesario para alcanzar dicha parada usando la velocidad media</td>
				</tr>
				<tr>
					<td>5.</td>
					<td>Se suman, si fuese necesario, los extras por estar cerca de un semáforo o un corte de tráfico</td>
				</tr>
				<tr>
					<td>6.</td>
					<td>Se calcula la hora de llegada estimada y se compara con la hora programada</td>
				</tr>
			</table>
			<br>

			La diferencia en segundos entre la hora programa y estimada es la salida de esta función.
		</div>

		<div class="step slide" data-x="-1024" data-y="-500" data-z="-200">
			<img src="images/captura4.png" width="100%" style="padding:70px 0;">
			<i style="font-size:22px;">Salida del proceso de estimación de retraso de los autobuses</i>
		</div>

		<div class="step slide" data-x="-1024" data-y="300" data-z="0">
			<center><h2>Notebook 4. Visualización y predicción - EMT Málaga</h2></center>
			<br><br>
			Notebook creado para estudiar los datos de los históricos de los retrasos de los autobuses de la EMT. <br>
			<br>
			Se muestran los datos en gráficas para visualizarlos y ver los distintos detalles. Se entrena un modelo de regresión lineal para ver su comportamiento. <br>
			<br>
			Se trata a los datos como una serie temporal y se entrena un modelo SARIMAX para realizar predicciones.
		</div>

		<div class="step slide" data-x="-1024" data-y="300" data-z="-200">
			<img src="images/captura5.png" width="100%" style="padding:70px 0;">
			<i style="font-size:22px;">Visualización de los datos de retraso de los autobuses</i>
		</div>

		<div class="step slide" data-x="-1024" data-y="300" data-z="-400">
			<img src="images/captura6.png" width="100%" style="padding:70px 0;">
			<i style="font-size:22px;">Resultados de la predicción usando el modelo lineal entrenado</i>
		</div>

		<div class="step slide" data-x="-1024" data-y="300" data-z="-600">
			<img src="images/captura7.png" width="100%" style="padding:70px 0;">
			<i style="font-size:22px;">Resultados de la predicción usando el modelo SARIMAX entrenado</i>
		</div>

		<div class="step slide" data-x="-1024" data-y="1024" data-z="0">
			<center><h2>Notebook 5. Visualización y predicción - M30 Madrid</h2></center>
			<br><br>
			Notebook similar al anterior para estudiar el histórico de datos procedentes de un sensor situado en la M30 en Madrid. La medida corresponde a la tomada todos los días a las 8:00 horas desde 2013 a agosto de 2018. <br>
			<br>
			Se analiza con más detalle los datos y se realizan comparaciones entre diferentes periodos de tiempo. <br>
			<br>
			Se calcula por fuerza bruta los mejores índices para entrenar un modelo SARIMAX y se realizan predicciones usando las medidas de todos los lunes disponibles.
		</div>

		<div class="step slide" data-x="-1024" data-y="1024" data-z="-200">
			<img src="images/captura8.png" width="100%" style="padding:70px 0;">
			<i style="font-size:22px;">Datos del año 2017</i>
		</div>

		<div class="step slide" data-x="-1024" data-y="1024" data-z="-400">
			<img src="images/captura9.png" width="100%" style="padding:70px 0;">
			<i style="font-size:22px;">Comparación entre cantidad de tráfico y velocidad media</i>
		</div>

		<div class="step slide" data-x="-1024" data-y="1024" data-z="-600">
			<img src="images/captura10.png" width="100%" style="padding:70px 0;">
			<i style="font-size:22px;">Comparación del mes de agosto durante 2017 y 2018</i>
		</div>

		<div class="step slide" data-x="-1024" data-y="1024" data-z="-800">
			<img src="images/captura11.png" width="100%" style="padding:70px 0;">
			<i style="font-size:22px;">Resultados del análisis por fuerza bruta para los índices del modelo SARIMAX</i>
		</div>

		<div class="step slide" data-x="-1024" data-y="1024" data-z="-1000">
			<img src="images/captura12.png" width="100%" style="padding:70px 0;">
			<i style="font-size:22px;">Resultados de la predicción usando el modelo SARIMAX entrenado</i>
		</div>

		<div class="step slide" data-x="0" data-y="1024" data-z="0">
			<center><h2>Notebook 6. Visualización y corrección – Parkings Málaga</h2></center>
			<br><br>
			En este notebook se intenta mejorar la calidad de los datos descargados, debido a que existe una oscilación extraña procedente del origen de los mismos. <br>
			<br>
			No es posible detectar qué datos son correctos y cuáles no durante la descarga, por lo que no pueden descartarse de forma automática. <br>
			<br>
			Se utilizan diversas técnicas de suavizado sobre los datos. Se concluye que el mejor resultado es ofrecido por la mediana.
		</div>

		<div class="step slide" data-x="0" data-y="1024" data-z="-200">
			<img src="images/captura13.png" width="100%" style="padding:70px 0;">
			<i style="font-size:22px;">Segmento original de los datos</i>
		</div>

		<div class="step slide" data-x="0" data-y="1024" data-z="-400">
			<img src="images/captura14.png" width="100%" style="padding:70px 0;">
			<i style="font-size:22px;">Comparación de los diferentes métodos de suavizado usados</i>
		</div>

		<div class="step slide" data-x="0" data-y="1024" data-z="-600">
			<img src="images/captura15.png" width="100%" style="padding:70px 0;">
			<i style="font-size:22px;">Resultado final de los datos tras aplicar el método de suavizado elegido</i>
		</div>

		<div class="step slide" data-x="0" data-y="300" data-z="0">
			<center><h2>Conclusiones generales</h2></center>
			<br><br>
			<ul>
				<li>Existen muchos conjuntos de datos abiertos disponibles, pero cada uno tiene su propio formato y requieren ciertas transformaciones para ser útiles</li>
				<li>Son necesarios grandes conjuntos de datos y de gran calidad para poder realizar predicciones útiles</li>
				<li>Las tareas y procesos llevados a cabo durante este trabajo podrían servir como base para estudios posteriores</li>
				<li>Se ha obtenido experiencia en el uso de las tecnologías utilizadas y el tratamiento de grandes cantidades de datos</li>
			</ul>
		</div>

		<div id="thanks" class="step slide" data-x="512" data-y="1000" data-z="5000" data-rotate-x="-20">
			<h2 class="centred">Muchas gracias por su atención</h2>
		</div>

		<div class="step slide" data-x="0" data-y="-500" data-z="0" style="font-size:20px;">
			<center>
				<div style="padding-top:20px;">
					Escuela Técnica Superior de Ingeniería Informática <br/>
					Máster en Ingeniería Informática
				</div>
				<h1 style="padding:50px 0 50px 0;">
					<b>Análisis y explotación de datos abiertos municipales de transporte con tecnologías Big Data</b>
				</h1>
				<h2 style="padding:10px 0 10px 0;">
					<b>Carlos Jesús Peláez Rivas</b> <br/>
				</h2>

				<table width="100%" style="padding-top:150px;">
					<tr>
						<td>
							Tutorizado por: <br/>
							<b>Antonio Jesús Nebro Urbaneja</b> <br>
							<b>José Manuel García Nieto</b> <br>
							<br>
							Departamento: <br/>
							<b>Lenguajes y Ciencias de la Computación</b>
						</td>
						<td style="text-align:right;">
							<br/>
							<br/>
							<br/>
							<br/>
							Universidad de Málaga<br/>
							Octubre de 2018
						</td>
					</tr>
				</table>
			</center>
		</div>

		<div id="overview" class="step" data-x="512" data-y="-800" data-z="6000">
		</div>
	</div>

	<div class="hint">
		<span class="fa fa-check"></span> Usa las fechas para desplazarte por la presentación
	</div>

	<script>
		if ("ontouchstart" in document.documentElement) {
			document.querySelector(".hint").innerHTML = "<p>Toca a izquierda o derecha para navegar</p>";
		}
	</script>

	<script src="js/impress.js"></script>
	<script>impress().init();</script>
</body>
</html>
